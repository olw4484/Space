#if UNITY_EDITOR
using UnityEditor;
using System.IO;

public static class EditorTestConfigCreator
{
    private const string CONFIG_PATH = "Assets/Editor/EditorTestConfig.cs";
    private const string TEMPLATE = @"#if UNITY_EDITOR
namespace #ROOTNAMESPACE#
{
    /// <summary>
    /// 에디터 전용 테스트 코드들의 전역 On/Off 스위치.
    /// </summary>
    public static class EditorTestConfig
    {
        /// <summary>true면 에디터 테스트 코드 실행.</summary>
        public static bool Enabled = true;
    }
}
#endif
";

    [MenuItem("Assets/Create/CustomScript/Create EditorTestConfig", false, 50)]
    public static void CreateConfig()
    {
        if (File.Exists(CONFIG_PATH))
        {
            EditorUtility.DisplayDialog("Already Exists", "이미 EditorTestConfig.cs가 존재합니다.", "OK");
            return;
        }

        // 네임스페이스 치환
        var ns = EditorSettings.projectGenerationRootNamespace;
        if (string.IsNullOrWhiteSpace(ns))
            ns = "DefaultNamespace";

        var content = TEMPLATE.Replace("#ROOTNAMESPACE#", ns);
        File.WriteAllText(CONFIG_PATH, content);

        AssetDatabase.Refresh();
        EditorUtility.DisplayDialog("Done", "EditorTestConfig.cs 생성 완료!", "OK");
    }
}
#endif